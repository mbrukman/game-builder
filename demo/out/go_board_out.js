var g=null,i=this;function k(a,c){var b=a.split("."),d=i;!(b[0]in d)&&d.execScript&&d.execScript("var "+b[0]);for(var e;b.length&&(e=b.shift());)!b.length&&void 0!==c?d[e]=c:d=d[e]?d[e]:d[e]={}}function m(a,c){function b(){}b.prototype=c.prototype;a.n=c.prototype;a.prototype=new b};function n(a){return"undefined"!=typeof a&&a!=g}function o(a,c){for(var b=1;b<arguments.length;++b)if(n(a.match("%s")))a=a.replace(/%s/,arguments[b]);else throw Error("Too many positional arguments to fill format string: "+a);if(n(a.match("%s")))throw Error("Not enough positional arguments to fill in format string: "+a);return a};function p(){}function r(a){this.d=a||g}r.prototype.h=function(a){this.d=a||g};function s(a,c){this.a=[];for(var b=0;b<c;++b){this.a[b]=[];for(var d=0;d<a;++d)this.a[b][d]=new r(g)}}function t(a,c){if(0>c[0]||a.a.length<=c[0]||0>c[1]||a.a[0].length<=c[1])throw Error(o("Invalid coords (%s, %s) for board (%s x %s)",c[0],c[1],a.a.length,a.a[0].length));return a.a[c[0]][c[1]]}s.prototype.j=function(a){a=u(a);t(this,a).h(g)};k("gamebuilder.games.BoardMxN.prototype.erasePieceAtPos",s.prototype.j);
s.prototype.b=function(a){return t(this,a).d};function u(a){if(2>a.length)throw Error("Invalid format of coordinates: "+a);return[a.charCodeAt(0)-97,a.substr(1,a.length)-1]};function v(a){this.i=a}var w=new v("white"),x=new v("black");function y(a){this.i=a}m(y,p);y.prototype.color=function(){return this.i};function z(){this.d=g}z.prototype.h=function(a){this.d=a||g};function A(a,c){s.call(this,a,c);this.a=[];for(var b=0;b<c;++b){this.a[b]=[];for(var d=0;d<a;++d)this.a[b][d]=new z}}m(A,s);A.prototype.l=function(a,c){var b=new y(a),d=u(c);t(this,d).h(b)};k("gamebuilder.games.go.BoardMxN.prototype.setPieceColorAtPos",A.prototype.l);
A.prototype.b=function(a){a=t(this,a).d;return n(a)?a:g};k("gamebuilder.games.go.BoardMxN.prototype.getPieceAtCoords",A.prototype.b);A.prototype.m=function(a){return this.b(u(a))};k("gamebuilder.games.go.BoardMxN.prototype.getPieceAtPos",A.prototype.m);function B(a){A.call(this,a,a)}m(B,A);function C(){B.call(this,9)}m(C,B);function D(a){this.a=a;this.f=document.createElement("table");this.g=!1;this.c=""}D.prototype.k=function(a){this.c=a};k("gamebuilder.games.go.ui.BoardUI.prototype.setImagePath",D.prototype.k);D.prototype.e=function(a){if(n(a)){if(a.color()==x)return o("%s/black.png",this.c);if(a.color()==w)return o("%s/white.png",this.c);throw Error("Invalid color of piece: "+a.color());}return o("%s/clear.png",this.c)};k("gamebuilder.games.go.ui.BoardUI.prototype.imagePathForPiece",D.prototype.e);
function E(a,c){var b=document.createElement("img");b.src=a.e(c);b.style.width=b.style.height="50px";return b}
function F(a){if(!a.g&&!a.g){if(""==a.c)throw Error("Error: call BoardUI.setImagePath() prior to calling BoardUI.init()");var c=a.a,b=a.f;b.cellSpacing=0;b.cellPadding=0;b.style.border="0";for(var d=c.a.length,e=c.a[0].length,f=d-1;0<=f;--f)for(var q=b.insertRow(-1),h=0;h<e;++h){var l=document.createElement("td"),j="",j=f==e-1?"upper-":0==f?"bottom-":"center-",j=0==h?j+"left":h==d-1?j+"right":j+"middle",j=j+".png";l.style.backgroundImage=o("url(%s/%s)",a.c,j);l.style.width=l.style.height="50px";l.appendChild(E(a,
c.b([h,f])));q.appendChild(l)}a.g=!0}return a.f}function G(a,c){return[c[1],a.a.a.length-c[0]-1]}D.prototype.update=function(){for(var a=this.a,c=this.f,b=0;b<c.rows.length;++b)for(var d=c.rows[b],e=0;e<d.childNodes.length;++e){var f=d.childNodes[e].childNodes[0],q=a.b(G(this,[b,e]));if(f.src!=this.e(q))f.src=this.e(q)}};function H(a,c,b){var d=I;return function(){d(a,c,b)}};var J=x,K=[[x,"blackPiece"],[w,"whitePiece"],[g,"emptyPiece"]];function L(){for(var a=0;a<K.length;++a)document.getElementById(K[a][1]).className=J==K[a][0]?"sel":"notsel"}function I(a,c,b){n(J)?c.l(J,b):c.j(b);a.update();L()}function M(a){return function(){J=a;L()}}function N(a){a=String.fromCharCode(a.which).toLowerCase();"b"==a?J=x:"w"==a?J=w:"e"==a&&(J=g);L()}
k("demo.go.board.displayGoBoard",function(){var a=new C,a=new D(a);a.k("../data/images/go");document.getElementById("board").appendChild(F(a));for(var c=0;c<K.length;++c){var b=K[c][0],d=g;n(b)&&(d=new y(b));d=E(a,d);d.onclick=M(b);document.getElementById(K[c][1]).appendChild(d)}a.update();c=a.a;b=a.f;for(d=0;d<b.rows.length;++d)for(var e=b.rows[d],f=0;f<e.childNodes.length;++f){var q=e.childNodes[f].childNodes[0],h=G(a,[d,f]),l=o("%s%s",String.fromCharCode(97+h[0]),h[1]+1),h=c.b(h);if("undefined"==
typeof h||h==g)q.onclick=H(a,c,l)}L();document.onkeypress=N});
