var i=this;function k(a,b){var c=a.split("."),d=i;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&void 0!==b?d[e]=b:d=d[e]?d[e]:d[e]={}}function l(a,b){function c(){}c.prototype=b.prototype;a.l=b.prototype;a.prototype=new c};function m(a){return"undefined"!=typeof a&&null!=a}function n(a,b){for(var c=1;c<arguments.length;++c)if(m(a.match("%s")))a=a.replace(/%s/,arguments[c]);else throw Error("Too many positional arguments to fill format string: "+a);if(m(a.match("%s")))throw Error("Not enough positional arguments to fill in format string: "+a);return a};function o(a){this.c=a}o.prototype.color=function(){return this.c};function p(a,b){this.a=[];for(var c=0;c<b;++c){this.a[c]=[];for(var d=0;d<a;++d)this.a[c][d]=null}}function q(a,b){if(0>b[0]||a.a.length<=b[0]||0>b[1]||a.a[0].length<=b[1])throw Error(n("Invalid coords (%s, %s) for board (%s x %s)",b[0],b[1],a.a.length,a.a[0].length));}function r(a,b){q(a,b);return a.a[b[0]][b[1]]}
function s(a){if(2>a.length)throw Error("Invalid format of coordinates: "+a);return[a.charCodeAt(0)-97,a.substr(1,a.length)-1]};function t(a){this.c=a}var u=new t("white"),v=new t("black");function w(a){this.c=this.c=a}l(w,o);w.prototype.color=function(){return this.c};function x(a,b){p.call(this,a,b)}l(x,p);function y(a){p.call(this,a,a)}l(y,x);function z(a){this.a=a;this.g=document.createElement("table");this.h=!1;this.b=""}z.prototype.k=function(a){this.b=a};k("gamebuilder.games.go.ui.BoardUI.prototype.setImagePath",z.prototype.k);z.prototype.e=function(a){if(m(a)){if(a.color()==v)return n("%s/black.png",this.b);if(a.color()==u)return n("%s/white.png",this.b);throw Error("Invalid color of piece: "+a.color());}return n("%s/clear.png",this.b)};k("gamebuilder.games.go.ui.BoardUI.prototype.imagePathForPiece",z.prototype.e);
function A(a,b){var c=document.createElement("img");c.src=a.e(b);c.style.width=c.style.height="50px";return c}
z.prototype.f=function(){if(!this.h){if(""==this.b)throw Error("Error: call go.BoardUI.setImagePath() prior to calling go.BoardUI.init()");var a=this.a,b=this.g;b.cellSpacing=0;b.cellPadding=0;b.style.border="0";for(var c=a.a.length,d=a.a[0].length,e=c-1;0<=e;--e)for(var h=b.insertRow(-1),g=0;g<d;++g){var j=document.createElement("td"),f="",f=e==d-1?"upper-":0==e?"bottom-":"center-",f=0==g?f+"left":g==c-1?f+"right":f+"middle",f=f+".png";j.style.backgroundImage=n("url(%s/%s)",this.b,f);j.style.width=
j.style.height="50px";j.appendChild(A(this,r(a,[g,e])));h.appendChild(j)}this.h=!0}};function B(a){a.h||a.f();return a.g}function C(a,b){return[b[1],a.a.a.length-b[0]-1]}z.prototype.update=function(){for(var a=this.a,b=this.g,c=0;c<b.rows.length;++c)for(var d=b.rows[c],e=0;e<d.childNodes.length;++e){var h=d.childNodes[e].childNodes[0],g=r(a,C(this,[c,e]));if(h.src!=this.e(g))h.src=this.e(g)}};function D(a,b,c,d){return function(){a(b,c,d)}};function E(a){this.a=new y(a);this.d=new z(this.a);this.j=v;this.i=[]}function F(a){return function(b,c,d){b=s(d);b=r(a.a,b);if(!m(b)){var b=a.j,c=a.a,e=new w(b),h=s(d);q(c,h);c.a[h[0]][h[1]]=e;a.d.update();for(c=0;c<a.i.length;++c)a.i[c](b,d);a.j=b==v?u:v}}}
E.prototype.f=function(){this.d.f();for(var a=this.d,b=F(this),c=a.a,d=a.g,e=0;e<d.rows.length;++e)for(var h=d.rows[e],g=0;g<h.childNodes.length;++g){var j=h.childNodes[g].childNodes[0],f=C(a,[e,g]),J=n("%s%s",String.fromCharCode(97+f[0]),f[1]+1),f=r(c,f);if("undefined"==typeof f||null==f)j.onclick=D(b,a,c,J)}};function G(){E.call(this,9)}l(G,E);var H=[[v,"blackPiece"],[u,"whitePiece"]];function I(a){for(var b=0;b<H.length;++b)document.getElementById(H[b][1]).className=a!=H[b][0]?"sel":"notsel"}k("demo.go.game.playGoGame",function(){var a=new G;a.i.push(I);var b=a.d;b.k("../data/images/go");document.getElementById("board").appendChild(B(b));for(var c=0;c<H.length;++c){var d=A(b,new w(H[c][0]));document.getElementById(H[c][1]).appendChild(d)}I(u);a.f()});
