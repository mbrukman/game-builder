var h=null,i=this;function j(a,b){var c=a.split("."),d=i;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&void 0!==b?d[e]=b:d=d[e]?d[e]:d[e]={}}function k(a,b){function c(){}c.prototype=b.prototype;a.r=b.prototype;a.prototype=new c};function n(a){return"undefined"!=typeof a&&a!=h}function o(a,b){for(var c=1;c<arguments.length;++c)if(n(a.match("%s")))a=a.replace(/%s/,arguments[c]);else throw Error("Too many positional arguments to fill format string: "+a);if(n(a.match("%s")))throw Error("Not enough positional arguments to fill in format string: "+a);return a};function p(){}function q(a){this.d=a||h}q.prototype.k=function(a){this.d=a||h};function r(a,b){this.a=[];for(var c=0;c<b;++c){this.a[c]=[];for(var d=0;d<a;++d)this.a[c][d]=new q(h)}}function s(a,b){if(0>b[0]||a.a.length<=b[0]||0>b[1]||a.a[0].length<=b[1])throw Error(o("Invalid coords (%s, %s) for board (%s x %s)",b[0],b[1],a.a.length,a.a[0].length));return a.a[b[0]][b[1]]}r.prototype.q=function(a){a=t(a);s(this,a).k(h)};j("gamebuilder.games.BoardMxN.prototype.erasePieceAtPos",r.prototype.q);
r.prototype.b=function(a){return s(this,a).d};function t(a){if(2>a.length)throw Error("Invalid format of coordinates: "+a);return[a.charCodeAt(0)-97,a.substr(1,a.length)-1]};function u(a){this.l=a}var v=new u("white"),w=new u("black");function x(a){this.l=a}k(x,p);x.prototype.color=function(){return this.l};function y(){this.d=h}y.prototype.k=function(a){this.d=a||h};function z(a,b){r.call(this,a,b);this.a=[];for(var c=0;c<b;++c){this.a[c]=[];for(var d=0;d<a;++d)this.a[c][d]=new y}}k(z,r);z.prototype.p=function(a,b){var c=new x(a),d=t(b);s(this,d).k(c)};j("gamebuilder.games.go.BoardMxN.prototype.setPieceColorAtPos",z.prototype.p);
z.prototype.b=function(a){a=s(this,a).d;return n(a)?a:h};j("gamebuilder.games.go.BoardMxN.prototype.getPieceAtCoords",z.prototype.b);z.prototype.m=function(a){return this.b(t(a))};j("gamebuilder.games.go.BoardMxN.prototype.getPieceAtPos",z.prototype.m);function A(a){z.call(this,a,a)}k(A,z);function B(a){this.a=a;this.h=document.createElement("table");this.i=!1;this.c=""}B.prototype.o=function(a){this.c=a};j("gamebuilder.games.go.ui.BoardUI.prototype.setImagePath",B.prototype.o);B.prototype.f=function(a){if(n(a)){if(a.color()==w)return o("%s/black.png",this.c);if(a.color()==v)return o("%s/white.png",this.c);throw Error("Invalid color of piece: "+a.color());}return o("%s/clear.png",this.c)};j("gamebuilder.games.go.ui.BoardUI.prototype.imagePathForPiece",B.prototype.f);
function C(a,b){var c=document.createElement("img");c.src=a.f(b);c.style.width=c.style.height="50px";return c}
B.prototype.g=function(){if(!this.i){if(""==this.c)throw Error("Error: call BoardUI.setImagePath() prior to calling BoardUI.init()");var a=this.a,b=this.h;b.cellSpacing=0;b.cellPadding=0;b.style.border="0";for(var c=a.a.length,d=a.a[0].length,e=c-1;0<=e;--e)for(var l=b.insertRow(-1),g=0;g<d;++g){var m=document.createElement("td"),f="",f=e==d-1?"upper-":0==e?"bottom-":"center-",f=0==g?f+"left":g==c-1?f+"right":f+"middle",f=f+".png";m.style.backgroundImage=o("url(%s/%s)",this.c,f);m.style.width=m.style.height=
"50px";m.appendChild(C(this,a.b([g,e])));l.appendChild(m)}this.i=!0}};function D(a){a.i||a.g();return a.h}function E(a,b){return[b[1],a.a.a.length-b[0]-1]}B.prototype.update=function(){for(var a=this.a,b=this.h,c=0;c<b.rows.length;++c)for(var d=b.rows[c],e=0;e<d.childNodes.length;++e){var l=d.childNodes[e].childNodes[0],g=a.b(E(this,[c,e]));if(l.src!=this.f(g))l.src=this.f(g)}};function F(a,b,c,d){return function(){a(b,c,d)}};function G(a){this.a=new A(a);this.e=new B(this.a);this.n=w;this.j=[]}function H(a){return function(b,c,d){b=a.a.m(d);if(!n(b)){b=a.n;a.a.p(b,d);a.e.update();for(c=0;c<a.j.length;++c)a.j[c](b,d);a.n=b==w?v:w}}}
G.prototype.g=function(){this.e.g();for(var a=this.e,b=H(this),c=a.a,d=a.h,e=0;e<d.rows.length;++e)for(var l=d.rows[e],g=0;g<l.childNodes.length;++g){var m=l.childNodes[g].childNodes[0],f=E(a,[e,g]),L=o("%s%s",String.fromCharCode(97+f[0]),f[1]+1),f=c.b(f);if("undefined"==typeof f||f==h)m.onclick=F(b,a,c,L)}};function I(){G.call(this,9)}k(I,G);var J=[[w,"blackPiece"],[v,"whitePiece"]];function K(a){for(var b=0;b<J.length;++b)document.getElementById(J[b][1]).className=a!=J[b][0]?"sel":"notsel"}j("demo.go.game.playGoGame",function(){var a=new I;a.j.push(K);var b=a.e;b.o("../data/images/go");document.getElementById("board").appendChild(D(b));for(var c=0;c<J.length;++c){var d=C(b,new x(J[c][0]));document.getElementById(J[c][1]).appendChild(d)}K(v);a.g()});
